}
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(rr_sfp[rr_UBIGEO==value,]), add=TRUE, col="red")
}
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(rr_sfp[ubigeo==value,]), add=TRUE, col="red")
}
for(value in ubigeo){
plot(st_geometry(rr_sfp[ubigeo==value,]), add=TRUE, col="red")
}
plot(st_geometry(rr_sfp[ubigeo==value,]), col="red")
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(rr_sfp[rr_UBIGEO==value,]), col="red")
}
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(rr_sfp[rr_UBIGEO==value,]), col="red")
plot(st_geometry(md[md_ubigeo==value,]), add = TRUE, axes=T, main=value, cex.axis=0.5)
}
library(dplyr)
library(sf)
library(Hmisc)
library(stringr)
rr <- read.csv("rr.csv", header = TRUE)
rr
# Geometry
rr_longitud <- rr$LONGITUD
rr_latitud <- rr$LATITUD
rr_coords <- data.frame(cbind(rr_longitud, rr_latitud))
rr_geometry <- st_sfc()
for(i in 1:nrow(rr_coords)){
a <- rr_coords$rr_longitud[i]
b <- rr_coords$rr_latitud[i]
P <- st_point(c(b, a))
rr_geometry[[i]] <- P
}
# Atributos adicionales
rr_ID_GEN <- rr$ID_GEN
rr_OBJECTID <- rr$OBJECTID
rr_DEPARTAMENTO <- rr$DEPARTAMENTO
rr_PROVINCIA <- rr$PROVINCIA
rr_DISTRITO <- rr$DISTRITO
rr_FECHA <- rr$FECHA_TOMA
rr_HORA <- rr$HORA_FOTO
rr_ESTADO <- rr$ESTADO_ALERTA
rr_atributos <- data.frame(
rr_ID_GEN,
rr_OBJECTID,
rr_DEPARTAMENTO,
rr_PROVINCIA,
rr_DISTRITO,
rr_FECHA,
rr_HORA,
rr_ESTADO
)
rr_atributos <- mutate(
rr_atributos,
rr_UBIGEO = paste(rr_atributos$rr_DEPARTAMENTO,"-",rr_atributos$rr_PROVINCIA,"-",rr_atributos$rr_DISTRITO)
)
# Colección
rr_sfp <- st_sf(rr_atributos, geometry = rr_geometry)
rr_sfp
md <- st_read("peru/distritos/DISTRITOS.shp")
md_data <- select(as.data.frame(md), CCDD:NOMBDIST)
md_data <- mutate(
md_data,
md_ubigeo = paste(md_data$NOMBDEP,"-",md_data$NOMBPROV,"-",md_data$NOMBDIST)
)
md_geom <- st_geometry(md)
md <- st_sf(md_data, geometry = md_geom)
md
plot(st_geometry(md),axes=T)
plot(st_geometry(rr_sfp), add=TRUE, col="red")
md_ubigeo <- md$md_ubigeo
rr_UBIGEO <- rr_sfp$rr_UBIGEO
rr_UBIGEO <- unique(rr_UBIGEO)
a <- length(rr_UBIGEO)
b <- length(rr_UBIGEO %in% md_ubigeo)
c <- length(intersect(md_ubigeo, rr_UBIGEO))
d <- length(setdiff(rr_UBIGEO, md_ubigeo))
e <- length(setdiff(md_ubigeo, rr_UBIGEO))
f <- c + e
g= c(a, b, c, d, e, f)
print(g)
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(rr_sfp[rr_UBIGEO==value,]), col="red")
plot(st_geometry(md[md_ubigeo==value,]), add = TRUE, axes=T, main=value, cex.axis=0.5)
}
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(rr_sfp[rr_UBIGEO==value,]), add = TRUE,col="red")
}
library(dplyr)
library(sf)
library(Hmisc)
library(stringr)
rr <- read.csv("rr.csv", header = TRUE)
rr
# Geometry
rr_longitud <- rr$LONGITUD
rr_latitud <- rr$LATITUD
rr_coords <- data.frame(cbind(rr_longitud, rr_latitud))
rr_geometry <- st_sfc()
for(i in 1:nrow(rr_coords)){
a <- rr_coords$rr_longitud[i]
b <- rr_coords$rr_latitud[i]
P <- st_point(c(a, b))
rr_geometry[[i]] <- P
}
# Atributos adicionales
rr_ID_GEN <- rr$ID_GEN
rr_OBJECTID <- rr$OBJECTID
rr_DEPARTAMENTO <- rr$DEPARTAMENTO
rr_PROVINCIA <- rr$PROVINCIA
rr_DISTRITO <- rr$DISTRITO
rr_FECHA <- rr$FECHA_TOMA
rr_HORA <- rr$HORA_FOTO
rr_ESTADO <- rr$ESTADO_ALERTA
rr_atributos <- data.frame(
rr_ID_GEN,
rr_OBJECTID,
rr_DEPARTAMENTO,
rr_PROVINCIA,
rr_DISTRITO,
rr_FECHA,
rr_HORA,
rr_ESTADO
)
rr_atributos <- mutate(
rr_atributos,
rr_UBIGEO = paste(rr_atributos$rr_DEPARTAMENTO,"-",rr_atributos$rr_PROVINCIA,"-",rr_atributos$rr_DISTRITO)
)
# Colección
rr_sfp <- st_sf(rr_atributos, geometry = rr_geometry)
rr_sfp
md <- st_read("peru/distritos/DISTRITOS.shp")
md_data <- select(as.data.frame(md), CCDD:NOMBDIST)
md_data <- mutate(
md_data,
md_ubigeo = paste(md_data$NOMBDEP,"-",md_data$NOMBPROV,"-",md_data$NOMBDIST)
)
md_geom <- st_geometry(md)
md <- st_sf(md_data, geometry = md_geom)
md
plot(st_geometry(md),axes=T)
plot(st_geometry(rr_sfp), add=TRUE, col="red")
md_ubigeo <- md$md_ubigeo
rr_UBIGEO <- rr_sfp$rr_UBIGEO
rr_UBIGEO <- unique(rr_UBIGEO)
a <- length(rr_UBIGEO)
b <- length(rr_UBIGEO %in% md_ubigeo)
c <- length(intersect(md_ubigeo, rr_UBIGEO))
d <- length(setdiff(rr_UBIGEO, md_ubigeo))
e <- length(setdiff(md_ubigeo, rr_UBIGEO))
f <- c + e
g= c(a, b, c, d, e, f)
print(g)
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(rr_sfp[rr_UBIGEO==value,]), add = TRUE,col="red")
}
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot((md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot((rr_sfp[rr_UBIGEO==value,]), add = TRUE,col="red")
}
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(rr_sfp[rr_UBIGEO==value,]), add = TRUE,col="red")
}
for(value in ubigeo){
graph <- ggplot(data=md[md_ubigeo==value,])+
geom_sf(color="black", fill="greenyellow")+
ggtitle(value)+
annotation_scale()+
annotation_north_arrow(location='tl', height = unit(0.8, "cm"), width= unit(0.8, "cm"))+
geom_point(data = rr_sfp[rr_UBIGEO==value,])
print(graph)
}
graph <- ggplot(data=md[md_ubigeo==value,])+
geom_sf(color="black", fill="greenyellow")+
ggtitle(value)+
geom_point(data = rr_sfp[rr_UBIGEO==value,])
for(value in ubigeo){
graph <- ggplot(data=md[md_ubigeo==value,])+
geom_sf(color="black", fill="greenyellow")+
ggtitle(value)+
geom_point(data = rr_sfp[rr_UBIGEO==value,])
print(graph)
}
for(value in ubigeo){
graph <- ggplot(data=md[md_ubigeo==value,])+
geom_sf(color="black", fill="greenyellow")+
ggtitle(value)
print(graph)
}
for(value in ubigeo){
graph <- ggplot(data=md[md_ubigeo==value,])+
geom_sf(color="black", fill="greenyellow")+
ggtitle(value)
print(graph)
graph <- graph +
geom_sf(data = rr_sfp[rr_UBIGEO==value,])
}
for(value in ubigeo){
graph <- ggplot(data=md[md_ubigeo==value,])+
geom_sf(color="black", fill="greenyellow")+
ggtitle(value)
print(graph)
graph <- graph +
geom_sf(data = rr_sfp[rr_UBIGEO==value,], colour="red", fill="red")
}
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(md[ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(rr_sfp[ubigeo==value,]), add = TRUE,col="red")
}
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(rr_sfp[ubigeo==value,]), add = TRUE,col="red")
}
plot(st_geometry(rr_sfp), add = TRUE,col="red")
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(rr_sfp), add = TRUE,col="red")
}
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(rr_sfp), add = TRUE,col="red", fill="red")
}
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
puntos <- rr_sfp[rr_UBIGEO=="value"]
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(puntos), add = TRUE,col="red", fill="red")
}
st_crs(rr_sfp)
rr_sfp
st_crs(rr_sfp) <- "WGS 84"
rr_sfp
+x_0=2500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"
rr_sfp
rr_sfp
st_crs(rr_sfp) <- "+proj=lcc +lat_1=17.5 +lat_2=29.5 +lat_0=12 +lon_0=-102
st_crs(rr_sfp) <- "+proj=lcc +lat_1=17.5 +lat_2=29.5 +lat_0=12 +lon_0=-102 +x_0=2500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"
rr_sfp
library(dplyr)
library(sf)
library(Hmisc)
library(stringr)
rr <- read.csv("rr.csv", header = TRUE)
rr
# Geometry
rr_longitud <- rr$LONGITUD
rr_latitud <- rr$LATITUD
rr_coords <- data.frame(cbind(rr_longitud, rr_latitud))
rr_geometry <- st_sfc()
for(i in 1:nrow(rr_coords)){
a <- rr_coords$rr_longitud[i]
b <- rr_coords$rr_latitud[i]
P <- st_point(c(a, b))
rr_geometry[[i]] <- P
}
# Atributos adicionales
rr_ID_GEN <- rr$ID_GEN
rr_OBJECTID <- rr$OBJECTID
rr_DEPARTAMENTO <- rr$DEPARTAMENTO
rr_PROVINCIA <- rr$PROVINCIA
rr_DISTRITO <- rr$DISTRITO
rr_FECHA <- rr$FECHA_TOMA
rr_HORA <- rr$HORA_FOTO
rr_ESTADO <- rr$ESTADO_ALERTA
rr_atributos <- data.frame(
rr_ID_GEN,
rr_OBJECTID,
rr_DEPARTAMENTO,
rr_PROVINCIA,
rr_DISTRITO,
rr_FECHA,
rr_HORA,
rr_ESTADO
)
rr_atributos <- mutate(
rr_atributos,
rr_UBIGEO = paste(rr_atributos$rr_DEPARTAMENTO,"-",rr_atributos$rr_PROVINCIA,"-",rr_atributos$rr_DISTRITO)
)
# Colección
rr_sfp <- st_sf(rr_atributos, geometry = rr_geometry)
st_crs(rr_sfp) <- "+proj=lcc +lat_1=17.5 +lat_2=29.5 +lat_0=12 +lon_0=-102 +x_0=2500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"
rr_sfp
md <- st_read("peru/distritos/DISTRITOS.shp")
md_data <- select(as.data.frame(md), CCDD:NOMBDIST)
md_data <- mutate(
md_data,
md_ubigeo = paste(md_data$NOMBDEP,"-",md_data$NOMBPROV,"-",md_data$NOMBDIST)
)
md_geom <- st_geometry(md)
md <- st_sf(md_data, geometry = md_geom)
md
plot(st_geometry(md),axes=T)
plot(st_geometry(rr_sfp), add=TRUE, col="red")
md_ubigeo <- md$md_ubigeo
rr_UBIGEO <- rr_sfp$rr_UBIGEO
rr_UBIGEO <- unique(rr_UBIGEO)
a <- length(rr_UBIGEO)
b <- length(rr_UBIGEO %in% md_ubigeo)
c <- length(intersect(md_ubigeo, rr_UBIGEO))
d <- length(setdiff(rr_UBIGEO, md_ubigeo))
e <- length(setdiff(md_ubigeo, rr_UBIGEO))
f <- c + e
g= c(a, b, c, d, e, f)
print(g)
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
puntos <- rr_sfp[rr_UBIGEO=="value"]
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(puntos), add = TRUE,col="red", fill="red")
}
library(dplyr)
library(sf)
library(Hmisc)
library(stringr)
rr <- read.csv("rr.csv", header = TRUE)
rr
# Geometry
rr_longitud <- rr$LONGITUD
rr_latitud <- rr$LATITUD
rr_coords <- data.frame(cbind(rr_longitud, rr_latitud))
rr_geometry <- st_sfc()
for(i in 1:nrow(rr_coords)){
a <- rr_coords$rr_longitud[i]
b <- rr_coords$rr_latitud[i]
P <- st_point(c(a, b))
rr_geometry[[i]] <- P
}
# Atributos adicionales
rr_ID_GEN <- rr$ID_GEN
rr_OBJECTID <- rr$OBJECTID
rr_DEPARTAMENTO <- rr$DEPARTAMENTO
rr_PROVINCIA <- rr$PROVINCIA
rr_DISTRITO <- rr$DISTRITO
rr_FECHA <- rr$FECHA_TOMA
rr_HORA <- rr$HORA_FOTO
rr_ESTADO <- rr$ESTADO_ALERTA
rr_atributos <- data.frame(
rr_ID_GEN,
rr_OBJECTID,
rr_DEPARTAMENTO,
rr_PROVINCIA,
rr_DISTRITO,
rr_FECHA,
rr_HORA,
rr_ESTADO
)
rr_atributos <- mutate(
rr_atributos,
rr_UBIGEO = paste(rr_atributos$rr_DEPARTAMENTO,"-",rr_atributos$rr_PROVINCIA,"-",rr_atributos$rr_DISTRITO)
)
# Colección
rr_sfp <- st_sf(rr_atributos, geometry = rr_geometry)
st_crs(rr_sfp) <- "+proj=lcc +lat_1=17.5 +lat_2=29.5 +lat_0=12 +lon_0=-102 +x_0=2500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"
rr_sfp
md <- st_read("peru/distritos/DISTRITOS.shp")
md_data <- select(as.data.frame(md), CCDD:NOMBDIST)
md_data <- mutate(
md_data,
md_ubigeo = paste(md_data$NOMBDEP,"-",md_data$NOMBPROV,"-",md_data$NOMBDIST)
)
md_geom <- st_geometry(md)
md <- st_sf(md_data, geometry = md_geom)
st_crs(md) <- "+proj=lcc +lat_1=17.5 +lat_2=29.5 +lat_0=12 +lon_0=-102 +x_0=2500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"
md
plot(st_geometry(md),axes=T)
plot(st_geometry(rr_sfp), add=TRUE, col="red")
md_ubigeo <- md$md_ubigeo
rr_UBIGEO <- rr_sfp$rr_UBIGEO
rr_UBIGEO <- unique(rr_UBIGEO)
a <- length(rr_UBIGEO)
b <- length(rr_UBIGEO %in% md_ubigeo)
c <- length(intersect(md_ubigeo, rr_UBIGEO))
d <- length(setdiff(rr_UBIGEO, md_ubigeo))
e <- length(setdiff(md_ubigeo, rr_UBIGEO))
f <- c + e
g= c(a, b, c, d, e, f)
print(g)
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
puntos <- rr_sfp[rr_UBIGEO=="value"]
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(puntos), add = TRUE,col="red", fill="red")
}
for(value in ubigeo){
graph <- ggplot(data=md[md_ubigeo==value,])+
geom_sf(color="black", fill="greenyellow")+
ggtitle(value)
print(graph)
graph <- graph +
geom_sf(data = rr_sfp[rr_UBIGEO==value,], colour="red", fill="red")
}
md <- st_read("peru/distritos/DISTRITOS.shp")
md_data <- select(as.data.frame(md), CCDD:NOMBDIST)
md_data <- mutate(
md_data,
md_ubigeo = paste(md_data$NOMBDEP,"-",md_data$NOMBPROV,"-",md_data$NOMBDIST)
)
md_geom <- st_geometry(md)
md <- st_sf(md_data, geometry = md_geom)
md
library(dplyr)
library(sf)
library(Hmisc)
library(stringr)
rr <- read.csv("rr.csv", header = TRUE)
rr
# Geometry
rr_longitud <- rr$LONGITUD
rr_latitud <- rr$LATITUD
rr_coords <- data.frame(cbind(rr_longitud, rr_latitud))
rr_geometry <- st_sfc()
for(i in 1:nrow(rr_coords)){
a <- rr_coords$rr_longitud[i]
b <- rr_coords$rr_latitud[i]
P <- st_point(c(a, b))
rr_geometry[[i]] <- P
}
# Atributos adicionales
rr_ID_GEN <- rr$ID_GEN
rr_OBJECTID <- rr$OBJECTID
rr_DEPARTAMENTO <- rr$DEPARTAMENTO
rr_PROVINCIA <- rr$PROVINCIA
rr_DISTRITO <- rr$DISTRITO
rr_FECHA <- rr$FECHA_TOMA
rr_HORA <- rr$HORA_FOTO
rr_ESTADO <- rr$ESTADO_ALERTA
rr_atributos <- data.frame(
rr_ID_GEN,
rr_OBJECTID,
rr_DEPARTAMENTO,
rr_PROVINCIA,
rr_DISTRITO,
rr_FECHA,
rr_HORA,
rr_ESTADO
)
rr_atributos <- mutate(
rr_atributos,
rr_UBIGEO = paste(rr_atributos$rr_DEPARTAMENTO,"-",rr_atributos$rr_PROVINCIA,"-",rr_atributos$rr_DISTRITO)
)
# Colección
rr_sfp <- st_sf(rr_atributos, geometry = rr_geometry)
st_crs(rr_sfp) <- "WGS 84"
rr_sfp
md <- st_read("peru/distritos/DISTRITOS.shp")
md_data <- select(as.data.frame(md), CCDD:NOMBDIST)
md_data <- mutate(
md_data,
md_ubigeo = paste(md_data$NOMBDEP,"-",md_data$NOMBPROV,"-",md_data$NOMBDIST)
)
md_geom <- st_geometry(md)
md <- st_sf(md_data, geometry = md_geom)
md
plot(st_geometry(md),axes=T)
plot(st_geometry(rr_sfp), add=TRUE, col="red")
md_ubigeo <- md$md_ubigeo
rr_UBIGEO <- rr_sfp$rr_UBIGEO
rr_UBIGEO <- unique(rr_UBIGEO)
a <- length(rr_UBIGEO)
b <- length(rr_UBIGEO %in% md_ubigeo)
c <- length(intersect(md_ubigeo, rr_UBIGEO))
d <- length(setdiff(rr_UBIGEO, md_ubigeo))
e <- length(setdiff(md_ubigeo, rr_UBIGEO))
f <- c + e
g= c(a, b, c, d, e, f)
print(g)
ubigeo <- intersect(md_ubigeo, rr_UBIGEO)
for(value in ubigeo){
puntos <- rr_sfp[rr_UBIGEO=="value"]
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(puntos), add = TRUE,col="red", fill="red")
}
for(value in ubigeo){
graph <- ggplot(data=md[md_ubigeo==value,])+
geom_sf(color="black", fill="greenyellow")+
ggtitle(value)
print(graph)
graph <- graph +
geom_sf(data = rr_sfp[rr_UBIGEO==value,], colour="red", fill="red")
}
ubigeo
sort(ubigeo)
for(value in ubigeo){
puntos <- rr_sfp[rr_UBIGEO=="value"]
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(puntos), add = TRUE,col="red", fill="red")
}
for(value in ubigeo){
puntos <- rr_sfp[rr_UBIGEO=="value"]
plot(st_geometry(md[md_ubigeo==value,]), axes=T, main=value, cex.axis=0.5)
plot(st_geometry(puntos), add = TRUE,col="red", fill="red")
}
